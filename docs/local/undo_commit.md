# ローカルリポジトリでの操作を取り消す
## ワークツリーの変更取り消す
ワークツリーの変更を取り消すには`git checkout`コマンドを使います。  

### 一部のファイルだけ戻す場合
`git checkout -- <file>`

以下のように指定したディレクトリ以下を再帰的に戻すことも可能です。
`git checkout -- <directly>`  


### 使ってみる
`README.md`を変更してから最後のコミットに戻します。

```bash
echo "## 変更部分" >> README.md
git checkout -- README.md
```
`echo`でREADME.mdに書き出されて`git checkout`で元に戻ったことが確認できたと思います。  

## ステージングを取り消す
ステージングを取り消すには`git reset`コマンドを使います。  

### 一部のファイルだけステージングを取り消す場合
`git reset <file>`  

### 全てのステージングを取り消す場合
`git reset`

ファイルを指定しなければ全てのステージングを取り消す事ができます。

### 使ってみる
ひとまず、コミットしないファイルを作成し、ステージングします。  
```
~/git_learning/ $ echo > remove.md
~/git_learning/ $ git add remove.md
```  
`git status`コマンドでステージングできた事を確認したら`git reset`コマンドを用いて取り消します。  
`git reset remove.md`  
コマンド実行後、取り消せた事を`git status`で確認してください。  

以降必要ないので`rm remove.md`で`remove.md`は削除しましょう。  

## コミットを取り消す
### 直前のコミットだけを取り消す
コミットのみを取り消しステージングエリアやワークツリーは、一切変更したくない場合に用いります。  
`git reset --soft HEAD^`  

#### `HEAD`って何？
大抵は最後のコミットを表し`HEAD^`で2つ前のコミットを表します。  
同じように`HEAD^^^`で4つ前のコミットを表しますが`HEAD~3`のように表記することもできます。  
`HEAD`のかわりにコミットハッシュを用いても同じです。  

### コミットとステージングを取り消す
コミットとステージングを取り消しますが、ワークツリーは変更されません。
`git reset --mixed HEAD^`  

### コミット,ステージング,ワークツリーを取り消す
ワークツリーも元に戻します。  
`git reset --hard HEAD^`  

ちなみに`git reset --hard HEAD`でステージングや作業ツリー全体の変更を最後のコミットまで戻すことができます。  

## 直前のコミットのコミットメッセージを変更する
`git commit --amend`を使うことで変更できます。  
コミットハッシュが変わるのでpush後は使用厳禁です。  
